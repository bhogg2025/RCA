let o=null;async function i(){if(o)return o;try{return o={apiBase:"/api",apiVersion:(await(await fetch("/api/meta")).json()).apiVersion??"unknown"},console.log("🔧 Runtime config loaded:",o),o}catch(e){return console.error("❌ Failed to load runtime config:",e),o={apiBase:"/api",apiVersion:"unknown"},o}}async function l(e,a){const{apiBase:t}=await i(),s=e.startsWith("/")?e:`/${e}`,r=`${t}${s}`;console.log(`🌐 API call: ${(a==null?void 0:a.method)||"GET"} ${r}`);const n=await fetch(r,a);if(!n.ok){const c=await n.text();throw new Error(`API Error ${n.status}: ${c}`)}return n}export{l as api};
